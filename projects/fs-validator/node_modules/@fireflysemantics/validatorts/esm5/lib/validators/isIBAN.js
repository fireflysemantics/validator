import { assertString } from '../util/assertString';
/**
 * List of country codes with
 * corresponding IBAN regular expression
 * Reference: https://en.wikipedia.org/wiki/International_Bank_Account_Number
 */
var ibanRegexThroughCountryCode = {
    AD: /^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,
    AE: /^(AE[0-9]{2})\d{3}\d{16}$/,
    AL: /^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,
    AT: /^(AT[0-9]{2})\d{16}$/,
    AZ: /^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,
    BA: /^(BA[0-9]{2})\d{16}$/,
    BE: /^(BE[0-9]{2})\d{12}$/,
    BG: /^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,
    BH: /^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,
    BR: /^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,
    BY: /^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,
    CH: /^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,
    CR: /^(CR[0-9]{2})\d{18}$/,
    CY: /^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,
    CZ: /^(CZ[0-9]{2})\d{20}$/,
    DE: /^(DE[0-9]{2})\d{18}$/,
    DK: /^(DK[0-9]{2})\d{14}$/,
    DO: /^(DO[0-9]{2})[A-Z]{4}\d{20}$/,
    EE: /^(EE[0-9]{2})\d{16}$/,
    ES: /^(ES[0-9]{2})\d{20}$/,
    FI: /^(FI[0-9]{2})\d{14}$/,
    FO: /^(FO[0-9]{2})\d{14}$/,
    FR: /^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,
    GB: /^(GB[0-9]{2})[A-Z]{4}\d{14}$/,
    GE: /^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,
    GI: /^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,
    GL: /^(GL[0-9]{2})\d{14}$/,
    GR: /^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,
    GT: /^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,
    HR: /^(HR[0-9]{2})\d{17}$/,
    HU: /^(HU[0-9]{2})\d{24}$/,
    IE: /^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,
    IL: /^(IL[0-9]{2})\d{19}$/,
    IQ: /^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,
    IS: /^(IS[0-9]{2})\d{22}$/,
    IT: /^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,
    JO: /^(JO[0-9]{2})[A-Z]{4}\d{22}$/,
    KW: /^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,
    KZ: /^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,
    LB: /^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,
    LC: /^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,
    LI: /^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,
    LT: /^(LT[0-9]{2})\d{16}$/,
    LU: /^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,
    LV: /^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,
    MC: /^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,
    MD: /^(MD[0-9]{2})[A-Z0-9]{20}$/,
    ME: /^(ME[0-9]{2})\d{18}$/,
    MK: /^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,
    MR: /^(MR[0-9]{2})\d{23}$/,
    MT: /^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,
    MU: /^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,
    NL: /^(NL[0-9]{2})[A-Z]{4}\d{10}$/,
    NO: /^(NO[0-9]{2})\d{11}$/,
    PK: /^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,
    PL: /^(PL[0-9]{2})\d{24}$/,
    PS: /^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,
    PT: /^(PT[0-9]{2})\d{21}$/,
    QA: /^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,
    RO: /^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,
    RS: /^(RS[0-9]{2})\d{18}$/,
    SA: /^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,
    SC: /^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,
    SE: /^(SE[0-9]{2})\d{20}$/,
    SI: /^(SI[0-9]{2})\d{15}$/,
    SK: /^(SK[0-9]{2})\d{20}$/,
    SM: /^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,
    TL: /^(TL[0-9]{2})\d{19}$/,
    TN: /^(TN[0-9]{2})\d{20}$/,
    TR: /^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,
    UA: /^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,
    VA: /^(VA[0-9]{2})\d{18}$/,
    VG: /^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,
    XK: /^(XK[0-9]{2})\d{16}$/,
};
/**
 * Check whether string has correct universal IBAN format
 * The IBAN consists of up to 34 alphanumeric characters, as follows:
 * Country Code using ISO 3166-1 alpha-2, two letters
 * check digits, two digits and
 * Basic Bank Account Number (BBAN), up to 30 alphanumeric characters.
 * NOTE: Permitted IBAN characters are: digits [0-9] and the 26 latin alphabetic [A-Z]
 *
 * @param {string} str - string under validation
 * @return {boolean}
 */
function hasValidIbanFormat(str) {
    // Strip white spaces and hyphens, keep only digits and A-Z latin alphabetic
    var strippedStr = str.replace(/[^A-Z0-9]+/gi, '').toUpperCase();
    var isoCountryCode = strippedStr.slice(0, 2).toUpperCase();
    return (isoCountryCode in ibanRegexThroughCountryCode) &&
        ibanRegexThroughCountryCode[isoCountryCode].test(strippedStr);
}
/**
   * Check whether string has valid IBAN Checksum
   * by performing basic mod-97 operation and
   * the remainder should equal 1
   * -- Start by rearranging the IBAN by moving the four initial characters to the end of the string
   * -- Replace each letter in the string with two digits, A -> 10, B = 11, Z = 35
   * -- Interpret the string as a decimal integer and
   * -- compute the remainder on division by 97 (mod 97)
   * Reference: https://en.wikipedia.org/wiki/International_Bank_Account_Number
   *
   * @param target The target string
   * @return true if the string has a valid IBAN checksum, false otherwise
   */
function hasValidIbanChecksum(target) {
    var strippedStr = target.replace(/[^A-Z0-9]+/gi, '').toUpperCase(); // Keep only digits and A-Z latin alphabetic
    var rearranged = strippedStr.slice(4) + strippedStr.slice(0, 4);
    var alphaCapsReplacedWithDigits = rearranged.replace(/[A-Z]/g, function (char) { return char.charCodeAt(0) - 55; });
    var remainder = alphaCapsReplacedWithDigits.match(/\d{1,7}/g)
        .reduce(function (acc, value) { return Number(acc + value) % 97; }, '');
    return remainder === 1;
}
/**
 * Checks whether the IBAN number has a valid format and checksum.
 *
 * @param target The target string
 * @return true if the target has a valid format and checksum, false otherwise
 */
export function isIBAN(target) {
    assertString(target);
    return hasValidIbanFormat(target) && hasValidIbanChecksum(target);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXNJQkFOLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZpcmVmbHlzZW1hbnRpY3MvdmFsaWRhdG9ydHMvIiwic291cmNlcyI6WyJsaWIvdmFsaWRhdG9ycy9pc0lCQU4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXBEOzs7O0dBSUc7QUFDSCxJQUFNLDJCQUEyQixHQUFHO0lBQ2xDLEVBQUUsRUFBRSxpQ0FBaUM7SUFDckMsRUFBRSxFQUFFLDJCQUEyQjtJQUMvQixFQUFFLEVBQUUsaUNBQWlDO0lBQ3JDLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLGlDQUFpQztJQUNyQyxFQUFFLEVBQUUsc0JBQXNCO0lBQzFCLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLHdDQUF3QztJQUM1QyxFQUFFLEVBQUUsb0NBQW9DO0lBQ3hDLEVBQUUsRUFBRSx5Q0FBeUM7SUFDN0MsRUFBRSxFQUFFLGlDQUFpQztJQUNyQyxFQUFFLEVBQUUsaUNBQWlDO0lBQ3JDLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLGlDQUFpQztJQUNyQyxFQUFFLEVBQUUsc0JBQXNCO0lBQzFCLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLHNCQUFzQjtJQUMxQixFQUFFLEVBQUUsOEJBQThCO0lBQ2xDLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLHNCQUFzQjtJQUMxQixFQUFFLEVBQUUsc0JBQXNCO0lBQzFCLEVBQUUsRUFBRSxzQkFBc0I7SUFDMUIsRUFBRSxFQUFFLHVDQUF1QztJQUMzQyxFQUFFLEVBQUUsOEJBQThCO0lBQ2xDLEVBQUUsRUFBRSxpQ0FBaUM7SUFDckMsRUFBRSxFQUFFLG9DQUFvQztJQUN4QyxFQUFFLEVBQUUsc0JBQXNCO0lBQzFCLEVBQUUsRUFBRSxpQ0FBaUM7SUFDckMsRUFBRSxFQUFFLHVDQUF1QztJQUMzQyxFQUFF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TUFBTSxDQUFDLFVBQUMsR0FBRyxFQUFFLEtBQUssSUFBSyxPQUFBLE1BQU0sQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsRUFBRSxFQUF4QixDQUF3QixFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRXhELE9BQU8sU0FBUyxLQUFLLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBQ0Q7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVUsTUFBTSxDQUFDLE1BQWM7SUFDbkMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXJCLE9BQU8sa0JBQWtCLENBQUMsTUFBTSxDQUFDLElBQUksb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDcEUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydFN0cmluZyB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0U3RyaW5nJztcblxuLyoqXG4gKiBMaXN0IG9mIGNvdW50cnkgY29kZXMgd2l0aFxuICogY29ycmVzcG9uZGluZyBJQkFOIHJlZ3VsYXIgZXhwcmVzc2lvblxuICogUmVmZXJlbmNlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlcm5hdGlvbmFsX0JhbmtfQWNjb3VudF9OdW1iZXJcbiAqL1xuY29uc3QgaWJhblJlZ2V4VGhyb3VnaENvdW50cnlDb2RlID0ge1xuICBBRDogL14oQURbMC05XXsyfSlcXGR7OH1bQS1aMC05XXsxMn0kLyxcbiAgQUU6IC9eKEFFWzAtOV17Mn0pXFxkezN9XFxkezE2fSQvLFxuICBBTDogL14oQUxbMC05XXsyfSlcXGR7OH1bQS1aMC05XXsxNn0kLyxcbiAgQVQ6IC9eKEFUWzAtOV17Mn0pXFxkezE2fSQvLFxuICBBWjogL14oQVpbMC05XXsyfSlbQS1aMC05XXs0fVxcZHsyMH0kLyxcbiAgQkE6IC9eKEJBWzAtOV17Mn0pXFxkezE2fSQvLFxuICBCRTogL14oQkVbMC05XXsyfSlcXGR7MTJ9JC8sXG4gIEJHOiAvXihCR1swLTldezJ9KVtBLVpdezR9XFxkezZ9W0EtWjAtOV17OH0kLyxcbiAgQkg6IC9eKEJIWzAtOV17Mn0pW0EtWl17NH1bQS1aMC05XXsxNH0kLyxcbiAgQlI6IC9eKEJSWzAtOV17Mn0pXFxkezIzfVtBLVpdezF9W0EtWjAtOV17MX0kLyxcbiAgQlk6IC9eKEJZWzAtOV17Mn0pW0EtWjAtOV17NH1cXGR7MjB9JC8sXG4gIENIOiAvXihDSFswLTldezJ9KVxcZHs1fVtBLVowLTldezEyfSQvLFxuICBDUjogL14oQ1JbMC05XXsyfSlcXGR7MTh9JC8sXG4gIENZOiAvXihDWVswLTldezJ9KVxcZHs4fVtBLVowLTldezE2fSQvLFxuICBDWjogL14oQ1pbMC05XXsyfSlcXGR7MjB9JC8sXG4gIERFOiAvXihERVswLTldezJ9KVxcZHsxOH0kLyxcbiAgREs6IC9eKERLWzAtOV17Mn0pXFxkezE0fSQvLFxuICBETzogL14oRE9bMC05XXsyfSlbQS1aXXs0fVxcZHsyMH0kLyxcbiAgRUU6IC9eKEVFWzAtOV17Mn0pXFxkezE2fSQvLFxuICBFUzogL14oRVNbMC05XXsyfSlcXGR7MjB9JC8sXG4gIEZJOiAvXihGSVswLTldezJ9KVxcZHsxNH0kLyxcbiAgRk86IC9eKEZPWzAtOV17Mn0pXFxkezE0fSQvLFxuICBGUjogL14oRlJbMC05XXsyfSlcXGR7MTB9W0EtWjAtOV17MTF9XFxkezJ9JC8sXG4gIEdCOiAvXihHQlswLTldezJ9KVtBLVpdezR9XFxkezE0fSQvLFxuICBHRTogL14oR0VbMC05XXsyfSlbQS1aMC05XXsyfVxcZHsxNn0kLyxcbiAgR0k6IC9eKEdJWzAtOV17Mn0pW0EtWl17NH1bQS1aMC05XXsxNX0kLyxcbiAgR0w6IC9eKEdMWzAtOV17Mn0pXFxkezE0fSQvLFxuICBHUjogL14oR1JbMC05XXsyfSlcXGR7N31bQS1aMC05XXsxNn0kLyxcbiAgR1Q6IC9eKEdUWzAtOV17Mn0pW0EtWjAtOV17NH1bQS1aMC05XXsyMH0kLyxcbiAgSFI6IC9eKEhSWzAtOV17Mn0pXFxkezE3fSQvLFxuICBIVTogL14oSFVbMC05XXsyfSlcXGR7MjR9JC8sXG4gIElFOiAvXihJRVswLTldezJ9KVtBLVowLTldezR9XFxkezE0fSQvLFxuICBJTDogL14oSUxbMC05XXsyfSlcXGR7MTl9JC8sXG4gIElROiAvXihJUVswLTldezJ9KVtBLVpdezR9XFxkezE1fSQvLFxuICBJUzogL14oSVNbMC05XXsyfSlcXGR7MjJ9JC8sXG4gIElUOiAvXihJVFswLTldezJ9KVtBLVpdezF9XFxkezEwfVtBLVowLTldezEyfSQvLFxuICBKTzogL14oSk9bMC05XXsyfSlbQS1aXXs0fVxcZHsyMn0kLyxcbiAgS1c6IC9eKEtXWzAtOV17Mn0pW0EtWl17NH1bQS1aMC05XXsyMn0kLyxcbiAgS1o6IC9eKEtaWzAtOV17Mn0pXFxkezN9W0EtWjAtOV17MTN9JC8sXG4gIExCOiAvXihMQlswLTldezJ9KVxcZHs0fVtBLVowLTldezIwfSQvLFxuICBMQzogL14oTENbMC05XXsyfSlbQS1aXXs0fVtBLVowLTldezI0fSQvLFxuICBMSTogL14oTElbMC05XXsyfSlcXGR7NX1bQS1aMC05XXsxMn0kLyxcbiAgTFQ6IC9eKExUWzAtOV17Mn0pXFxkezE2fSQvLFxuICBMVTogL14oTFVbMC05XXsyfSlcXGR7M31bQS1aMC05XXsxM30kLyxcbiAgTFY6IC9eKExWWzAtOV17Mn0pW0EtWl17NH1bQS1aMC05XXsxM30kLyxcbiAgTUM6IC9eKE1DWzAtOV17Mn0pXFxkezEwfVtBLVowLTldezExfVxcZHsyfSQvLFxuICBNRDogL14oTURbMC05XXsyfSlbQS1aMC05XXsyMH0kLyxcbiAgTUU6IC9eKE1FWzAtOV17Mn0pXFxkezE4fSQvLFxuICBNSzogL14oTUtbMC05XXsyfSlcXGR7M31bQS1aMC05XXsxMH1cXGR7Mn0kLyxcbiAgTVI6IC9eKE1SWzAtOV17Mn0pXFxkezIzfSQvLFxuICBNVDogL14oTVRbMC05XXsyfSlbQS1aXXs0fVxcZHs1fVtBLVowLTldezE4fSQvLFxuICBNVTogL14oTVVbMC05XXsyfSlbQS1aXXs0fVxcZHsxOX1bQS1aXXszfSQvLFxuICBOTDogL14oTkxbMC05XXsyfSlbQS1aXXs0fVxcZHsxMH0kLyxcbiAgTk86IC9eKE5PWzAtOV17Mn0pXFxkezExfSQvLFxuICBQSzogL14oUEtbMC05XXsyfSlbQS1aMC05XXs0fVxcZHsxNn0kLyxcbiAgUEw6IC9eKFBMWzAtOV17Mn0pXFxkezI0fSQvLFxuICBQUzogL14oUFNbMC05XXsyfSlbQS1aMC05XXs0fVxcZHsyMX0kLyxcbiAgUFQ6IC9eKFBUWzAtOV17Mn0pXFxkezIxfSQvLFxuICBRQTogL14oUUFbMC05XXsyfSlbQS1aXXs0fVtBLVowLTldezIxfSQvLFxuICBSTzogL14oUk9bMC05XXsyfSlbQS1aXXs0fVtBLVowLTldezE2fSQvLFxuICBSUzogL14oUlNbMC05XXsyfSlcXGR7MTh9JC8sXG4gIFNBOiAvXihTQVswLTldezJ9KVxcZHsyfVtBLVowLTldezE4fSQvLFxuICBTQzogL14oU0NbMC05XXsyfSlbQS1aXXs0fVxcZHsyMH1bQS1aXXszfSQvLFxuICBTRTogL14oU0VbMC05XXsyfSlcXGR7MjB9JC8sXG4gIFNJOiAvXihTSVswLTldezJ9KVxcZHsxNX0kLyxcbiAgU0s6IC9eKFNLWzAtOV17Mn0pXFxkezIwfSQvLFxuICBTTTogL14oU01bMC05XXsyfSlbQS1aXXsxfVxcZHsxMH1bQS1aMC05XXsxMn0kLyxcbiAgVEw6IC9eKFRMWzAtOV17Mn0pXFxkezE5fSQvLFxuICBUTjogL14oVE5bMC05XXsyfSlcXGR7MjB9JC8sXG4gIFRSOiAvXihUUlswLTldezJ9KVxcZHs1fVtBLVowLTldezE3fSQvLFxuICBVQTogL14oVUFbMC05XXsyfSlcXGR7Nn1bQS1aMC05XXsxOX0kLyxcbiAgVkE6IC9eKFZBWzAtOV17Mn0pXFxkezE4fSQvLFxuICBWRzogL14oVkdbMC05XXsyfSlbQS1aMC05XXs0fVxcZHsxNn0kLyxcbiAgWEs6IC9eKFhLWzAtOV17Mn0pXFxkezE2fSQvLFxufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHN0cmluZyBoYXMgY29ycmVjdCB1bml2ZXJzYWwgSUJBTiBmb3JtYXRcbiAqIFRoZSBJQkFOIGNvbnNpc3RzIG9mIHVwIHRvIDM0IGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzLCBhcyBmb2xsb3dzOlxuICogQ291bnRyeSBDb2RlIHVzaW5nIElTTyAzMTY2LTEgYWxwaGEtMiwgdHdvIGxldHRlcnNcbiAqIGNoZWNrIGRpZ2l0cywgdHdvIGRpZ2l0cyBhbmRcbiAqIEJhc2ljIEJhbmsgQWNjb3VudCBOdW1iZXIgKEJCQU4pLCB1cCB0byAzMCBhbHBoYW51bWVyaWMgY2hhcmFjdGVycy5cbiAqIE5PVEU6IFBlcm1pdHRlZCBJQkFOIGNoYXJhY3RlcnMgYXJlOiBkaWdpdHMgWzAtOV0gYW5kIHRoZSAyNiBsYXRpbiBhbHBoYWJldGljIFtBLVpdXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIHN0cmluZyB1bmRlciB2YWxpZGF0aW9uXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNWYWxpZEliYW5Gb3JtYXQoc3RyKSB7XG4gIC8vIFN0cmlwIHdoaXRlIHNwYWNlcyBhbmQgaHlwaGVucywga2VlcCBvbmx5IGRpZ2l0cyBhbmQgQS1aIGxhdGluIGFscGhhYmV0aWNcbiAgY29uc3Qgc3RyaXBwZWRTdHIgPSBzdHIucmVwbGFjZSgvW15BLVowLTldKy9naSwgJycpLnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IGlzb0NvdW50cnlDb2RlID0gc3RyaXBwZWRTdHIuc2xpY2UoMCwgMikudG9VcHBlckNhc2UoKTtcblxuICByZXR1cm4gKGlzb0NvdW50cnlDb2RlIGluIGliYW5SZWdleFRocm91Z2hDb3VudHJ5Q29kZSkgJiZcbiAgICBpYmFuUmVnZXhUaHJvdWdoQ291bnRyeUNvZGVbaXNvQ291bnRyeUNvZGVdLnRlc3Qoc3RyaXBwZWRTdHIpO1xufVxuXG4vKipcbiAgICogQ2hlY2sgd2hldGhlciBzdHJpbmcgaGFzIHZhbGlkIElCQU4gQ2hlY2tzdW1cbiAgICogYnkgcGVyZm9ybWluZyBiYXNpYyBtb2QtOTcgb3BlcmF0aW9uIGFuZFxuICAgKiB0aGUgcmVtYWluZGVyIHNob3VsZCBlcXVhbCAxXG4gICAqIC0tIFN0YXJ0IGJ5IHJlYXJyYW5naW5nIHRoZSBJQkFOIGJ5IG1vdmluZyB0aGUgZm91ciBpbml0aWFsIGNoYXJhY3RlcnMgdG8gdGhlIGVuZCBvZiB0aGUgc3RyaW5nXG4gICAqIC0tIFJlcGxhY2UgZWFjaCBsZXR0ZXIgaW4gdGhlIHN0cmluZyB3aXRoIHR3byBkaWdpdHMsIEEgLT4gMTAsIEIgPSAxMSwgWiA9IDM1XG4gICAqIC0tIEludGVycHJldCB0aGUgc3RyaW5nIGFzIGEgZGVjaW1hbCBpbnRlZ2VyIGFuZFxuICAgKiAtLSBjb21wdXRlIHRoZSByZW1haW5kZXIgb24gZGl2aXNpb24gYnkgOTcgKG1vZCA5NylcbiAgICogUmVmZXJlbmNlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlcm5hdGlvbmFsX0JhbmtfQWNjb3VudF9OdW1iZXJcbiAgICpcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHN0cmluZ1xuICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgYSB2YWxpZCBJQkFOIGNoZWNrc3VtLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG5mdW5jdGlvbiBoYXNWYWxpZEliYW5DaGVja3N1bSh0YXJnZXQpIHtcbiAgY29uc3Qgc3RyaXBwZWRTdHIgPSB0YXJnZXQucmVwbGFjZSgvW15BLVowLTldKy9naSwgJycpLnRvVXBwZXJDYXNlKCk7IC8vIEtlZXAgb25seSBkaWdpdHMgYW5kIEEtWiBsYXRpbiBhbHBoYWJldGljXG4gIGNvbnN0IHJlYXJyYW5nZWQgPSBzdHJpcHBlZFN0ci5zbGljZSg0KSArIHN0cmlwcGVkU3RyLnNsaWNlKDAsIDQpO1xuICBjb25zdCBhbHBoYUNhcHNSZXBsYWNlZFdpdGhEaWdpdHMgPSByZWFycmFuZ2VkLnJlcGxhY2UoL1tBLVpdL2csIGNoYXIgPT4gY2hhci5jaGFyQ29kZUF0KDApIC0gNTUpO1xuXG4gIGNvbnN0IHJlbWFpbmRlciA9IGFscGhhQ2Fwc1JlcGxhY2VkV2l0aERpZ2l0cy5tYXRjaCgvXFxkezEsN30vZylcbiAgICAucmVkdWNlKChhY2MsIHZhbHVlKSA9PiBOdW1iZXIoYWNjICsgdmFsdWUpICUgOTcsICcnKTtcblxuICByZXR1cm4gcmVtYWluZGVyID09PSAxO1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgSUJBTiBudW1iZXIgaGFzIGEgdmFsaWQgZm9ybWF0IGFuZCBjaGVja3N1bS5cbiAqIFxuICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHN0cmluZ1xuICogQHJldHVybiB0cnVlIGlmIHRoZSB0YXJnZXQgaGFzIGEgdmFsaWQgZm9ybWF0IGFuZCBjaGVja3N1bSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0lCQU4odGFyZ2V0OiBzdHJpbmcpIHtcbiAgYXNzZXJ0U3RyaW5nKHRhcmdldCk7XG5cbiAgcmV0dXJuIGhhc1ZhbGlkSWJhbkZvcm1hdCh0YXJnZXQpICYmIGhhc1ZhbGlkSWJhbkNoZWNrc3VtKHRhcmdldCk7XG59XG4iXX0=