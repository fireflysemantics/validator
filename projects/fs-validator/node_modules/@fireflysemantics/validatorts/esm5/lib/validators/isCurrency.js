import { merge } from '../util/merge';
import { assertString } from '../util/assertString';
function currencyRegex(options) {
    var decimal_digits = "\\d{" + options.digits_after_decimal[0] + "}";
    options.digits_after_decimal.forEach(function (digit, index) { if (index !== 0)
        decimal_digits = decimal_digits + "|\\d{" + digit + "}"; });
    var symbol = "(\\" + options.symbol.replace(/\./g, '\\.') + ")" + (options.require_symbol ? '' : '?'), negative = '-?', whole_dollar_amount_without_sep = '[1-9]\\d*', whole_dollar_amount_with_sep = "[1-9]\\d{0,2}(\\" + options.thousands_separator + "\\d{3})*", valid_whole_dollar_amounts = [
        '0', whole_dollar_amount_without_sep, whole_dollar_amount_with_sep
    ], whole_dollar_amount = "(" + valid_whole_dollar_amounts.join('|') + ")?", decimal_amount = "(\\" + options.decimal_separator + "(" + decimal_digits + "))" + (options.require_decimal ? '' : '?');
    var pattern = whole_dollar_amount + (options.allow_decimal || options.require_decimal ? decimal_amount : '');
    // default is negative sign before symbol, but there are two other options (besides parens)
    if (options.allow_negatives && !options.parens_for_negatives) {
        if (options.negative_sign_after_digits) {
            pattern += negative;
        }
        else if (options.negative_sign_before_digits) {
            pattern = negative + pattern;
        }
    }
    // South African Rand, for example, uses R 123 (space) and R-123 (no space)
    if (options.allow_negative_sign_placeholder) {
        pattern = "( (?!\\-))?" + pattern;
    }
    else if (options.allow_space_after_symbol) {
        pattern = " ?" + pattern;
    }
    else if (options.allow_space_after_digits) {
        pattern += '( (?!$))?';
    }
    if (options.symbol_after_digits) {
        pattern += symbol;
    }
    else {
        pattern = symbol + pattern;
    }
    if (options.allow_negatives) {
        if (options.parens_for_negatives) {
            pattern = "(\\(" + pattern + "\\)|" + pattern + ")";
        }
        else if (!(options.negative_sign_before_digits || options.negative_sign_after_digits)) {
            pattern = negative + pattern;
        }
    }
    // ensure there's a dollar and/or decimal amount, and that
    // it doesn't start with a space or a negative sign followed by a space
    return new RegExp("^(?!-? )(?=.*\\d)" + pattern + "$");
}
/**
 * The currency default options
 */
var default_currency_options = {
    symbol: '$',
    require_symbol: false,
    allow_space_after_symbol: false,
    symbol_after_digits: false,
    allow_negatives: true,
    parens_for_negatives: false,
    negative_sign_before_digits: false,
    negative_sign_after_digits: false,
    allow_negative_sign_placeholder: false,
    thousands_separator: ',',
    decimal_separator: '.',
    allow_decimal: true,
    require_decimal: false,
    digits_after_decimal: [2],
    allow_space_after_digits: false,
};
/**
 * Checks whether the `target` string is a currency
 *
 * @param target The target string
 * @param options The options
 * @return true if the `target` is a currency, false otherwise
 */
export function isCurrency(str, options) {
    assertString(str);
    options = merge(options, default_currency_options);
    return currencyRegex(options).test(str);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXNDdXJyZW5jeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmaXJlZmx5c2VtYW50aWNzL3ZhbGlkYXRvcnRzLyIsInNvdXJjZXMiOlsibGliL3ZhbGlkYXRvcnMvaXNDdXJyZW5jeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVwRCxTQUFTLGFBQWEsQ0FBQyxPQUFPO0lBQzVCLElBQUksY0FBYyxHQUFHLFNBQU8sT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxNQUFHLENBQUM7SUFDL0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxVQUFDLEtBQUssRUFBRSxLQUFLLElBQU8sSUFBSSxLQUFLLEtBQUssQ0FBQztRQUFFLGNBQWMsR0FBTSxjQUFjLGFBQVEsS0FBSyxNQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqSSxJQUFNLE1BQU0sR0FDVixRQUFNLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsU0FBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFHLEVBQ25GLFFBQVEsR0FBRyxJQUFJLEVBQ2YsK0JBQStCLEdBQUcsV0FBVyxFQUM3Qyw0QkFBNEIsR0FBRyxxQkFBbUIsT0FBTyxDQUFDLG1CQUFtQixhQUFVLEVBQ3ZGLDBCQUEwQixHQUFHO1FBQzNCLEdBQUcsRUFBRSwrQkFBK0IsRUFBRSw0QkFBNEI7S0FBQyxFQUNyRSxtQkFBbUIsR0FBRyxNQUFJLDBCQUEwQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBSSxFQUNsRSxjQUFjLEdBQUcsUUFBTSxPQUFPLENBQUMsaUJBQWlCLFNBQUksY0FBYyxXQUFLLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFFLENBQUM7SUFDOUcsSUFBSSxPQUFPLEdBQUcsbUJBQW1CLEdBQUcsQ0FBQyxPQUFPLENBQUMsYUFBYSxJQUFJLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFN0csMkZBQTJGO0lBQzNGLElBQUksT0FBTyxDQUFDLGVBQWUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsRUFBRTtRQUM1RCxJQUFJLE9BQU8sQ0FBQywwQkFBMEIsRUFBRTtZQUN0QyxPQUFPLElBQUksUUFBUSxDQUFDO1NBQ3JCO2FBQU0sSUFBSSxPQUFPLENBQUMsMkJBQTJCLEVBQUU7WUFDOUMsT0FBTyxHQUFHLFFBQVEsR0FBRyxPQUFPLENBQUM7U0FDOUI7S0FDRjtJQUVELDJFQUEyRTtJQUMzRSxJQUFJLE9BQU8sQ0FBQywrQkFBK0IsRUFBRTtRQUMzQyxPQUFPLEdBQUcsZ0JBQWMsT0FBUyxDQUFDO0tBQ25DO1NBQU0sSUFBSSxPQUFPLENBQUMsd0JBQXdCLEVBQUU7UUFDM0MsT0FBTyxHQUFHLE9BQUssT0FBUyxDQUFDO0tBQzFCO1NBQU0sSUFBSSxPQUFPLENBQUMsd0JBQXdCLEVBQUU7UUFDM0MsT0FBTyxJQUFJLFdBQVcsQ0FBQztLQUN4QjtJQUVELElBQUksT0FBTyxDQUFDLG1CQUFtQixFQUFFO1FBQy9CLE9BQU8sSUFBSSxNQUFNLENBQUM7S0FDbkI7U0FBTTtRQUNMLE9BQU8sR0FBRyxNQUFNLEdBQUcsT0FBTyxDQUFDO0tBQzVCO0lBRUQsSUFBSSxPQUFPLENBQUMsZUFBZSxFQUFFO1FBQzNCLElBQUksT0FBTyxDQUFDLG9CQUFvQixFQUFFO1lBQ2hDLE9BQU8sR0FBRyxTQUFPLE9BQU8sWUFBTyxPQUFPLE1BQUcsQ0FBQztTQUMzQzthQUFNLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQywyQkFBMkIsSUFBSSxPQUFPLENBQUMsMEJBQTBCLENBQUMsRUFBRTtZQUN2RixPQUFPLEdBQUcsUUFBUSxHQUFHLE9BQU8sQ0FBQztTQUM5QjtLQUNGO0lBRUQsMERBQTBEO0lBQzFELHVFQUF1RTtJQUN2RSxPQUFPLElBQUksTUFBTSxDQUFDLHNCQUFvQixPQUFPLE1BQUcsQ0FBQyxDQUFDO0FBQ3BELENBQUM7QUF3QkQ7O0dBRUc7QUFDSCxJQUFNLHdCQUF3QixHQUFxQjtJQUNqRCxNQUFNLEVBQUUsR0FBRztJQUNYLGNBQWMsRUFBRSxLQUFLO0lBQ3JCLHdCQUF3QixFQUFFLEtBQUs7SUFDL0IsbUJBQW1CLEVBQUUsS0FBSztJQUMxQixlQUFlLEVBQUUsSUFBSTtJQUNyQixvQkFBb0IsRUFBRSxLQUFLO0lBQzNCLDJCQUEyQixFQUFFLEtBQUs7SUFDbEMsMEJBQTBCLEVBQUUsS0FBSztJQUNqQywrQkFBK0IsRUFBRSxLQUFLO0lBQ3RDLG1CQUFtQixFQUFFLEdBQUc7SUFDeEIsaUJBQWlCLEVBQUUsR0FBRztJQUN0QixhQUFhLEVBQUUsSUFBSTtJQUNuQixlQUFlLEVBQUUsS0FBSztJQUN0QixvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN6Qix3QkFBd0IsRUFBRSxLQUFLO0NBQ2hDLENBQUM7QUFFRjs7Ozs7O0dBTUc7QUFDSCxNQUFNLFVBQVUsVUFBVSxDQUFDLEdBQVcsRUFBRSxPQUFPO0lBQzdDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNsQixPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSx3QkFBd0IsQ0FBQyxDQUFDO0lBQ25ELE9BQU8sYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2UgfSBmcm9tICcuLi91dGlsL21lcmdlJztcbmltcG9ydCB7IGFzc2VydFN0cmluZyB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0U3RyaW5nJztcblxuZnVuY3Rpb24gY3VycmVuY3lSZWdleChvcHRpb25zKSB7XG4gIGxldCBkZWNpbWFsX2RpZ2l0cyA9IGBcXFxcZHske29wdGlvbnMuZGlnaXRzX2FmdGVyX2RlY2ltYWxbMF19fWA7XG4gIG9wdGlvbnMuZGlnaXRzX2FmdGVyX2RlY2ltYWwuZm9yRWFjaCgoZGlnaXQsIGluZGV4KSA9PiB7IGlmIChpbmRleCAhPT0gMCkgZGVjaW1hbF9kaWdpdHMgPSBgJHtkZWNpbWFsX2RpZ2l0c318XFxcXGR7JHtkaWdpdH19YDsgfSk7XG4gIGNvbnN0IHN5bWJvbCA9XG4gICAgYChcXFxcJHtvcHRpb25zLnN5bWJvbC5yZXBsYWNlKC9cXC4vZywgJ1xcXFwuJyl9KSR7KG9wdGlvbnMucmVxdWlyZV9zeW1ib2wgPyAnJyA6ICc/Jyl9YCxcbiAgICBuZWdhdGl2ZSA9ICctPycsXG4gICAgd2hvbGVfZG9sbGFyX2Ftb3VudF93aXRob3V0X3NlcCA9ICdbMS05XVxcXFxkKicsXG4gICAgd2hvbGVfZG9sbGFyX2Ftb3VudF93aXRoX3NlcCA9IGBbMS05XVxcXFxkezAsMn0oXFxcXCR7b3B0aW9ucy50aG91c2FuZHNfc2VwYXJhdG9yfVxcXFxkezN9KSpgLFxuICAgIHZhbGlkX3dob2xlX2RvbGxhcl9hbW91bnRzID0gW1xuICAgICAgJzAnLCB3aG9sZV9kb2xsYXJfYW1vdW50X3dpdGhvdXRfc2VwLCB3aG9sZV9kb2xsYXJfYW1vdW50X3dpdGhfc2VwXSxcbiAgICB3aG9sZV9kb2xsYXJfYW1vdW50ID0gYCgke3ZhbGlkX3dob2xlX2RvbGxhcl9hbW91bnRzLmpvaW4oJ3wnKX0pP2AsXG4gICAgZGVjaW1hbF9hbW91bnQgPSBgKFxcXFwke29wdGlvbnMuZGVjaW1hbF9zZXBhcmF0b3J9KCR7ZGVjaW1hbF9kaWdpdHN9KSkke29wdGlvbnMucmVxdWlyZV9kZWNpbWFsID8gJycgOiAnPyd9YDtcbiAgbGV0IHBhdHRlcm4gPSB3aG9sZV9kb2xsYXJfYW1vdW50ICsgKG9wdGlvbnMuYWxsb3dfZGVjaW1hbCB8fCBvcHRpb25zLnJlcXVpcmVfZGVjaW1hbCA/IGRlY2ltYWxfYW1vdW50IDogJycpO1xuXG4gIC8vIGRlZmF1bHQgaXMgbmVnYXRpdmUgc2lnbiBiZWZvcmUgc3ltYm9sLCBidXQgdGhlcmUgYXJlIHR3byBvdGhlciBvcHRpb25zIChiZXNpZGVzIHBhcmVucylcbiAgaWYgKG9wdGlvbnMuYWxsb3dfbmVnYXRpdmVzICYmICFvcHRpb25zLnBhcmVuc19mb3JfbmVnYXRpdmVzKSB7XG4gICAgaWYgKG9wdGlvbnMubmVnYXRpdmVfc2lnbl9hZnRlcl9kaWdpdHMpIHtcbiAgICAgIHBhdHRlcm4gKz0gbmVnYXRpdmU7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm5lZ2F0aXZlX3NpZ25fYmVmb3JlX2RpZ2l0cykge1xuICAgICAgcGF0dGVybiA9IG5lZ2F0aXZlICsgcGF0dGVybjtcbiAgICB9XG4gIH1cblxuICAvLyBTb3V0aCBBZnJpY2FuIFJhbmQsIGZvciBleGFtcGxlLCB1c2VzIFIgMTIzIChzcGFjZSkgYW5kIFItMTIzIChubyBzcGFjZSlcbiAgaWYgKG9wdGlvbnMuYWxsb3dfbmVnYXRpdmVfc2lnbl9wbGFjZWhvbGRlcikge1xuICAgIHBhdHRlcm4gPSBgKCAoPyFcXFxcLSkpPyR7cGF0dGVybn1gO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuYWxsb3dfc3BhY2VfYWZ0ZXJfc3ltYm9sKSB7XG4gICAgcGF0dGVybiA9IGAgPyR7cGF0dGVybn1gO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuYWxsb3dfc3BhY2VfYWZ0ZXJfZGlnaXRzKSB7XG4gICAgcGF0dGVybiArPSAnKCAoPyEkKSk/JztcbiAgfVxuXG4gIGlmIChvcHRpb25zLnN5bWJvbF9hZnRlcl9kaWdpdHMpIHtcbiAgICBwYXR0ZXJuICs9IHN5bWJvbDtcbiAgfSBlbHNlIHtcbiAgICBwYXR0ZXJuID0gc3ltYm9sICsgcGF0dGVybjtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmFsbG93X25lZ2F0aXZlcykge1xuICAgIGlmIChvcHRpb25zLnBhcmVuc19mb3JfbmVnYXRpdmVzKSB7XG4gICAgICBwYXR0ZXJuID0gYChcXFxcKCR7cGF0dGVybn1cXFxcKXwke3BhdHRlcm59KWA7XG4gICAgfSBlbHNlIGlmICghKG9wdGlvbnMubmVnYXRpdmVfc2lnbl9iZWZvcmVfZGlnaXRzIHx8IG9wdGlvbnMubmVnYXRpdmVfc2lnbl9hZnRlcl9kaWdpdHMpKSB7XG4gICAgICBwYXR0ZXJuID0gbmVnYXRpdmUgKyBwYXR0ZXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVuc3VyZSB0aGVyZSdzIGEgZG9sbGFyIGFuZC9vciBkZWNpbWFsIGFtb3VudCwgYW5kIHRoYXRcbiAgLy8gaXQgZG9lc24ndCBzdGFydCB3aXRoIGEgc3BhY2Ugb3IgYSBuZWdhdGl2ZSBzaWduIGZvbGxvd2VkIGJ5IGEgc3BhY2VcbiAgcmV0dXJuIG5ldyBSZWdFeHAoYF4oPyEtPyApKD89LipcXFxcZCkke3BhdHRlcm59JGApO1xufVxuXG4vKipcbiAqIElzQ3VycmVuY3kgT3B0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJc0N1cnJlbmN5T3B0aW9ucyB7XG4gIHN5bWJvbD86IHN0cmluZ1xuICByZXF1aXJlX3N5bWJvbD86IGJvb2xlYW5cbiAgYWxsb3dfc3BhY2VfYWZ0ZXJfc3ltYm9sPzogYm9vbGVhblxuICBzeW1ib2xfYWZ0ZXJfZGlnaXRzPzogYm9vbGVhblxuICBhbGxvd19uZWdhdGl2ZXM/OiBib29sZWFuXG4gIHBhcmVuc19mb3JfbmVnYXRpdmVzPzogYm9vbGVhblxuICBuZWdhdGl2ZV9zaWduX2JlZm9yZV9kaWdpdHM/OiBib29sZWFuXG4gIG5lZ2F0aXZlX3NpZ25fYWZ0ZXJfZGlnaXRzPzogYm9vbGVhblxuICBhbGxvd19uZWdhdGl2ZV9zaWduX3BsYWNlaG9sZGVyPzogYm9vbGVhblxuICB0aG91c2FuZHNfc2VwYXJhdG9yPzogc3RyaW5nXG4gIGRlY2ltYWxfc2VwYXJhdG9yPzogc3RyaW5nXG4gIGFsbG93X2RlY2ltYWw6IGJvb2xlYW5cbiAgcmVxdWlyZV9kZWNpbWFsOiBib29sZWFuXG4gIGRpZ2l0c19hZnRlcl9kZWNpbWFsOiBudW1iZXJbXVxuICBhbGxvd19zcGFjZV9hZnRlcl9kaWdpdHM/OiBib29sZWFuXG59XG5cblxuLyoqXG4gKiBUaGUgY3VycmVuY3kgZGVmYXVsdCBvcHRpb25zXG4gKi9cbmNvbnN0IGRlZmF1bHRfY3VycmVuY3lfb3B0aW9uczpJc0N1cnJlbmN5T3B0aW9ucyA9IHtcbiAgc3ltYm9sOiAnJCcsXG4gIHJlcXVpcmVfc3ltYm9sOiBmYWxzZSxcbiAgYWxsb3dfc3BhY2VfYWZ0ZXJfc3ltYm9sOiBmYWxzZSxcbiAgc3ltYm9sX2FmdGVyX2RpZ2l0czogZmFsc2UsXG4gIGFsbG93X25lZ2F0aXZlczogdHJ1ZSxcbiAgcGFyZW5zX2Zvcl9uZWdhdGl2ZXM6IGZhbHNlLFxuICBuZWdhdGl2ZV9zaWduX2JlZm9yZV9kaWdpdHM6IGZhbHNlLFxuICBuZWdhdGl2ZV9zaWduX2FmdGVyX2RpZ2l0czogZmFsc2UsXG4gIGFsbG93X25lZ2F0aXZlX3NpZ25fcGxhY2Vob2xkZXI6IGZhbHNlLFxuICB0aG91c2FuZHNfc2VwYXJhdG9yOiAnLCcsXG4gIGRlY2ltYWxfc2VwYXJhdG9yOiAnLicsXG4gIGFsbG93X2RlY2ltYWw6IHRydWUsXG4gIHJlcXVpcmVfZGVjaW1hbDogZmFsc2UsXG4gIGRpZ2l0c19hZnRlcl9kZWNpbWFsOiBbMl0sXG4gIGFsbG93X3NwYWNlX2FmdGVyX2RpZ2l0czogZmFsc2UsXG59O1xuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBgdGFyZ2V0YCBzdHJpbmcgaXMgYSBjdXJyZW5jeVxuICogXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgc3RyaW5nXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9uc1xuICogQHJldHVybiB0cnVlIGlmIHRoZSBgdGFyZ2V0YCBpcyBhIGN1cnJlbmN5LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ3VycmVuY3koc3RyOiBzdHJpbmcsIG9wdGlvbnMpIHtcbiAgYXNzZXJ0U3RyaW5nKHN0cik7XG4gIG9wdGlvbnMgPSBtZXJnZShvcHRpb25zLCBkZWZhdWx0X2N1cnJlbmN5X29wdGlvbnMpO1xuICByZXR1cm4gY3VycmVuY3lSZWdleChvcHRpb25zKS50ZXN0KHN0cik7XG59XG4iXX0=