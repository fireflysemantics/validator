import { assertString } from '../util/assertString';
var isin = /^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;
/**
 * Test whether the target string is an ISBN number.
 *
 * @param target The string
 * @return true if the `target` string is an ISIN number, false otherwise
 */
export function isISIN(target) {
    assertString(target);
    if (!isin.test(target)) {
        return false;
    }
    var checksumStr = target.replace(/[A-Z]/g, function (character) {
        var intValue = (parseInt(character, 36));
        return intValue ? intValue.toString() : '';
    });
    var sum = 0;
    var digit;
    var tmpNum;
    var shouldDouble = true;
    for (var i = checksumStr.length - 2; i >= 0; i--) {
        digit = checksumStr.substring(i, (i + 1));
        tmpNum = parseInt(digit, 10);
        if (shouldDouble) {
            tmpNum *= 2;
            if (tmpNum >= 10) {
                sum += tmpNum + 1;
            }
            else {
                sum += tmpNum;
            }
        }
        else {
            sum += tmpNum;
        }
        shouldDouble = !shouldDouble;
    }
    return parseInt(target.substr(target.length - 1), 10) === (10000 - sum) % 10;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXNJU0lOLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZpcmVmbHlzZW1hbnRpY3MvdmFsaWRhdG9ydHMvIiwic291cmNlcyI6WyJsaWIvdmFsaWRhdG9ycy9pc0lTSU4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXBELElBQU0sSUFBSSxHQUFHLDRCQUE0QixDQUFDO0FBRzFDOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFVLE1BQU0sQ0FBQyxNQUFhO0lBQ2xDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUN0QixPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsSUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBQSxTQUFTO1FBQ3BELElBQU0sUUFBUSxHQUFHLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQzFDLE9BQU8sUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUM1QyxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztJQUNaLElBQUksS0FBSyxDQUFDO0lBQ1YsSUFBSSxNQUFNLENBQUM7SUFDWCxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUM7SUFDeEIsS0FBSyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2hELEtBQUssR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzdCLElBQUksWUFBWSxFQUFFO1lBQ2hCLE1BQU0sSUFBSSxDQUFDLENBQUM7WUFDWixJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7Z0JBQ2hCLEdBQUcsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO2FBQ25CO2lCQUFNO2dCQUNMLEdBQUcsSUFBSSxNQUFNLENBQUM7YUFDZjtTQUNGO2FBQU07WUFDTCxHQUFHLElBQUksTUFBTSxDQUFDO1NBQ2Y7UUFDRCxZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUM7S0FDOUI7SUFFRCxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQy9FLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnRTdHJpbmcgfSBmcm9tICcuLi91dGlsL2Fzc2VydFN0cmluZyc7XG5cbmNvbnN0IGlzaW4gPSAvXltBLVpdezJ9WzAtOUEtWl17OX1bMC05XSQvO1xuXG5cbi8qKlxuICogVGVzdCB3aGV0aGVyIHRoZSB0YXJnZXQgc3RyaW5nIGlzIGFuIElTQk4gbnVtYmVyLlxuICogXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBzdHJpbmdcbiAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgYHRhcmdldGAgc3RyaW5nIGlzIGFuIElTSU4gbnVtYmVyLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSVNJTih0YXJnZXQ6c3RyaW5nKSB7XG4gIGFzc2VydFN0cmluZyh0YXJnZXQpO1xuICBpZiAoIWlzaW4udGVzdCh0YXJnZXQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgY2hlY2tzdW1TdHIgPSB0YXJnZXQucmVwbGFjZSgvW0EtWl0vZywgY2hhcmFjdGVyID0+IHtcbiAgICBjb25zdCBpbnRWYWx1ZSA9IChwYXJzZUludChjaGFyYWN0ZXIsIDM2KSlcbiAgICByZXR1cm4gaW50VmFsdWUgPyBpbnRWYWx1ZS50b1N0cmluZygpIDogJydcbiAgfSk7XG5cbiAgbGV0IHN1bSA9IDA7XG4gIGxldCBkaWdpdDtcbiAgbGV0IHRtcE51bTtcbiAgbGV0IHNob3VsZERvdWJsZSA9IHRydWU7XG4gIGZvciAobGV0IGkgPSBjaGVja3N1bVN0ci5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgIGRpZ2l0ID0gY2hlY2tzdW1TdHIuc3Vic3RyaW5nKGksIChpICsgMSkpO1xuICAgIHRtcE51bSA9IHBhcnNlSW50KGRpZ2l0LCAxMCk7XG4gICAgaWYgKHNob3VsZERvdWJsZSkge1xuICAgICAgdG1wTnVtICo9IDI7XG4gICAgICBpZiAodG1wTnVtID49IDEwKSB7XG4gICAgICAgIHN1bSArPSB0bXBOdW0gKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VtICs9IHRtcE51bTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3VtICs9IHRtcE51bTtcbiAgICB9XG4gICAgc2hvdWxkRG91YmxlID0gIXNob3VsZERvdWJsZTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZUludCh0YXJnZXQuc3Vic3RyKHRhcmdldC5sZW5ndGggLSAxKSwgMTApID09PSAoMTAwMDAgLSBzdW0pICUgMTA7XG59XG4iXX0=