import { merge } from '../util/merge';
import { assertString } from '../util/assertString';
function currencyRegex(options) {
    let decimal_digits = `\\d{${options.digits_after_decimal[0]}}`;
    options.digits_after_decimal.forEach((digit, index) => { if (index !== 0)
        decimal_digits = `${decimal_digits}|\\d{${digit}}`; });
    const symbol = `(\\${options.symbol.replace(/\./g, '\\.')})${(options.require_symbol ? '' : '?')}`, negative = '-?', whole_dollar_amount_without_sep = '[1-9]\\d*', whole_dollar_amount_with_sep = `[1-9]\\d{0,2}(\\${options.thousands_separator}\\d{3})*`, valid_whole_dollar_amounts = [
        '0', whole_dollar_amount_without_sep, whole_dollar_amount_with_sep
    ], whole_dollar_amount = `(${valid_whole_dollar_amounts.join('|')})?`, decimal_amount = `(\\${options.decimal_separator}(${decimal_digits}))${options.require_decimal ? '' : '?'}`;
    let pattern = whole_dollar_amount + (options.allow_decimal || options.require_decimal ? decimal_amount : '');
    // default is negative sign before symbol, but there are two other options (besides parens)
    if (options.allow_negatives && !options.parens_for_negatives) {
        if (options.negative_sign_after_digits) {
            pattern += negative;
        }
        else if (options.negative_sign_before_digits) {
            pattern = negative + pattern;
        }
    }
    // South African Rand, for example, uses R 123 (space) and R-123 (no space)
    if (options.allow_negative_sign_placeholder) {
        pattern = `( (?!\\-))?${pattern}`;
    }
    else if (options.allow_space_after_symbol) {
        pattern = ` ?${pattern}`;
    }
    else if (options.allow_space_after_digits) {
        pattern += '( (?!$))?';
    }
    if (options.symbol_after_digits) {
        pattern += symbol;
    }
    else {
        pattern = symbol + pattern;
    }
    if (options.allow_negatives) {
        if (options.parens_for_negatives) {
            pattern = `(\\(${pattern}\\)|${pattern})`;
        }
        else if (!(options.negative_sign_before_digits || options.negative_sign_after_digits)) {
            pattern = negative + pattern;
        }
    }
    // ensure there's a dollar and/or decimal amount, and that
    // it doesn't start with a space or a negative sign followed by a space
    return new RegExp(`^(?!-? )(?=.*\\d)${pattern}$`);
}
/**
 * The currency default options
 */
const default_currency_options = {
    symbol: '$',
    require_symbol: false,
    allow_space_after_symbol: false,
    symbol_after_digits: false,
    allow_negatives: true,
    parens_for_negatives: false,
    negative_sign_before_digits: false,
    negative_sign_after_digits: false,
    allow_negative_sign_placeholder: false,
    thousands_separator: ',',
    decimal_separator: '.',
    allow_decimal: true,
    require_decimal: false,
    digits_after_decimal: [2],
    allow_space_after_digits: false,
};
/**
 * Checks whether the `target` string is a currency
 *
 * @param target The target string
 * @param options The options
 * @return true if the `target` is a currency, false otherwise
 */
export function isCurrency(str, options) {
    assertString(str);
    options = merge(options, default_currency_options);
    return currencyRegex(options).test(str);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXNDdXJyZW5jeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmaXJlZmx5c2VtYW50aWNzL3ZhbGlkYXRvcnRzLyIsInNvdXJjZXMiOlsibGliL3ZhbGlkYXRvcnMvaXNDdXJyZW5jeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVwRCxTQUFTLGFBQWEsQ0FBQyxPQUFPO0lBQzVCLElBQUksY0FBYyxHQUFHLE9BQU8sT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDL0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLElBQUksS0FBSyxLQUFLLENBQUM7UUFBRSxjQUFjLEdBQUcsR0FBRyxjQUFjLFFBQVEsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqSSxNQUFNLE1BQU0sR0FDVixNQUFNLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFDbkYsUUFBUSxHQUFHLElBQUksRUFDZiwrQkFBK0IsR0FBRyxXQUFXLEVBQzdDLDRCQUE0QixHQUFHLG1CQUFtQixPQUFPLENBQUMsbUJBQW1CLFVBQVUsRUFDdkYsMEJBQTBCLEdBQUc7UUFDM0IsR0FBRyxFQUFFLCtCQUErQixFQUFFLDRCQUE0QjtLQUFDLEVBQ3JFLG1CQUFtQixHQUFHLElBQUksMEJBQTBCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQ2xFLGNBQWMsR0FBRyxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxjQUFjLEtBQUssT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUM5RyxJQUFJLE9BQU8sR0FBRyxtQkFBbUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxhQUFhLElBQUksT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUU3RywyRkFBMkY7SUFDM0YsSUFBSSxPQUFPLENBQUMsZUFBZSxJQUFJLENBQUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFO1FBQzVELElBQUksT0FBTyxDQUFDLDBCQUEwQixFQUFFO1lBQ3RDLE9BQU8sSUFBSSxRQUFRLENBQUM7U0FDckI7YUFBTSxJQUFJLE9BQU8sQ0FBQywyQkFBMkIsRUFBRTtZQUM5QyxPQUFPLEdBQUcsUUFBUSxHQUFHLE9BQU8sQ0FBQztTQUM5QjtLQUNGO0lBRUQsMkVBQTJFO0lBQzNFLElBQUksT0FBTyxDQUFDLCtCQUErQixFQUFFO1FBQzNDLE9BQU8sR0FBRyxjQUFjLE9BQU8sRUFBRSxDQUFDO0tBQ25DO1NBQU0sSUFBSSxPQUFPLENBQUMsd0JBQXdCLEVBQUU7UUFDM0MsT0FBTyxHQUFHLEtBQUssT0FBTyxFQUFFLENBQUM7S0FDMUI7U0FBTSxJQUFJLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRTtRQUMzQyxPQUFPLElBQUksV0FBVyxDQUFDO0tBQ3hCO0lBRUQsSUFBSSxPQUFPLENBQUMsbUJBQW1CLEVBQUU7UUFDL0IsT0FBTyxJQUFJLE1BQU0sQ0FBQztLQUNuQjtTQUFNO1FBQ0wsT0FBTyxHQUFHLE1BQU0sR0FBRyxPQUFPLENBQUM7S0FDNUI7SUFFRCxJQUFJLE9BQU8sQ0FBQyxlQUFlLEVBQUU7UUFDM0IsSUFBSSxPQUFPLENBQUMsb0JBQW9CLEVBQUU7WUFDaEMsT0FBTyxHQUFHLE9BQU8sT0FBTyxPQUFPLE9BQU8sR0FBRyxDQUFDO1NBQzNDO2FBQU0sSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLDJCQUEyQixJQUFJLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxFQUFFO1lBQ3ZGLE9BQU8sR0FBRyxRQUFRLEdBQUcsT0FBTyxDQUFDO1NBQzlCO0tBQ0Y7SUFFRCwwREFBMEQ7SUFDMUQsdUVBQXVFO0lBQ3ZFLE9BQU8sSUFBSSxNQUFNLENBQUMsb0JBQW9CLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQXdCRDs7R0FFRztBQUNILE1BQU0sd0JBQXdCLEdBQXFCO0lBQ2pELE1BQU0sRUFBRSxHQUFHO0lBQ1gsY0FBYyxFQUFFLEtBQUs7SUFDckIsd0JBQXdCLEVBQUUsS0FBSztJQUMvQixtQkFBbUIsRUFBRSxLQUFLO0lBQzFCLGVBQWUsRUFBRSxJQUFJO0lBQ3JCLG9CQUFvQixFQUFFLEtBQUs7SUFDM0IsMkJBQTJCLEVBQUUsS0FBSztJQUNsQywwQkFBMEIsRUFBRSxLQUFLO0lBQ2pDLCtCQUErQixFQUFFLEtBQUs7SUFDdEMsbUJBQW1CLEVBQUUsR0FBRztJQUN4QixpQkFBaUIsRUFBRSxHQUFHO0lBQ3RCLGFBQWEsRUFBRSxJQUFJO0lBQ25CLGVBQWUsRUFBRSxLQUFLO0lBQ3RCLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pCLHdCQUF3QixFQUFFLEtBQUs7Q0FDaEMsQ0FBQztBQUVGOzs7Ozs7R0FNRztBQUNILE1BQU0sVUFBVSxVQUFVLENBQUMsR0FBVyxFQUFFLE9BQU87SUFDN0MsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFLHdCQUF3QixDQUFDLENBQUM7SUFDbkQsT0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZSB9IGZyb20gJy4uL3V0aWwvbWVyZ2UnO1xuaW1wb3J0IHsgYXNzZXJ0U3RyaW5nIH0gZnJvbSAnLi4vdXRpbC9hc3NlcnRTdHJpbmcnO1xuXG5mdW5jdGlvbiBjdXJyZW5jeVJlZ2V4KG9wdGlvbnMpIHtcbiAgbGV0IGRlY2ltYWxfZGlnaXRzID0gYFxcXFxkeyR7b3B0aW9ucy5kaWdpdHNfYWZ0ZXJfZGVjaW1hbFswXX19YDtcbiAgb3B0aW9ucy5kaWdpdHNfYWZ0ZXJfZGVjaW1hbC5mb3JFYWNoKChkaWdpdCwgaW5kZXgpID0+IHsgaWYgKGluZGV4ICE9PSAwKSBkZWNpbWFsX2RpZ2l0cyA9IGAke2RlY2ltYWxfZGlnaXRzfXxcXFxcZHske2RpZ2l0fX1gOyB9KTtcbiAgY29uc3Qgc3ltYm9sID1cbiAgICBgKFxcXFwke29wdGlvbnMuc3ltYm9sLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKX0pJHsob3B0aW9ucy5yZXF1aXJlX3N5bWJvbCA/ICcnIDogJz8nKX1gLFxuICAgIG5lZ2F0aXZlID0gJy0/JyxcbiAgICB3aG9sZV9kb2xsYXJfYW1vdW50X3dpdGhvdXRfc2VwID0gJ1sxLTldXFxcXGQqJyxcbiAgICB3aG9sZV9kb2xsYXJfYW1vdW50X3dpdGhfc2VwID0gYFsxLTldXFxcXGR7MCwyfShcXFxcJHtvcHRpb25zLnRob3VzYW5kc19zZXBhcmF0b3J9XFxcXGR7M30pKmAsXG4gICAgdmFsaWRfd2hvbGVfZG9sbGFyX2Ftb3VudHMgPSBbXG4gICAgICAnMCcsIHdob2xlX2RvbGxhcl9hbW91bnRfd2l0aG91dF9zZXAsIHdob2xlX2RvbGxhcl9hbW91bnRfd2l0aF9zZXBdLFxuICAgIHdob2xlX2RvbGxhcl9hbW91bnQgPSBgKCR7dmFsaWRfd2hvbGVfZG9sbGFyX2Ftb3VudHMuam9pbignfCcpfSk/YCxcbiAgICBkZWNpbWFsX2Ftb3VudCA9IGAoXFxcXCR7b3B0aW9ucy5kZWNpbWFsX3NlcGFyYXRvcn0oJHtkZWNpbWFsX2RpZ2l0c30pKSR7b3B0aW9ucy5yZXF1aXJlX2RlY2ltYWwgPyAnJyA6ICc/J31gO1xuICBsZXQgcGF0dGVybiA9IHdob2xlX2RvbGxhcl9hbW91bnQgKyAob3B0aW9ucy5hbGxvd19kZWNpbWFsIHx8IG9wdGlvbnMucmVxdWlyZV9kZWNpbWFsID8gZGVjaW1hbF9hbW91bnQgOiAnJyk7XG5cbiAgLy8gZGVmYXVsdCBpcyBuZWdhdGl2ZSBzaWduIGJlZm9yZSBzeW1ib2wsIGJ1dCB0aGVyZSBhcmUgdHdvIG90aGVyIG9wdGlvbnMgKGJlc2lkZXMgcGFyZW5zKVxuICBpZiAob3B0aW9ucy5hbGxvd19uZWdhdGl2ZXMgJiYgIW9wdGlvbnMucGFyZW5zX2Zvcl9uZWdhdGl2ZXMpIHtcbiAgICBpZiAob3B0aW9ucy5uZWdhdGl2ZV9zaWduX2FmdGVyX2RpZ2l0cykge1xuICAgICAgcGF0dGVybiArPSBuZWdhdGl2ZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubmVnYXRpdmVfc2lnbl9iZWZvcmVfZGlnaXRzKSB7XG4gICAgICBwYXR0ZXJuID0gbmVnYXRpdmUgKyBwYXR0ZXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNvdXRoIEFmcmljYW4gUmFuZCwgZm9yIGV4YW1wbGUsIHVzZXMgUiAxMjMgKHNwYWNlKSBhbmQgUi0xMjMgKG5vIHNwYWNlKVxuICBpZiAob3B0aW9ucy5hbGxvd19uZWdhdGl2ZV9zaWduX3BsYWNlaG9sZGVyKSB7XG4gICAgcGF0dGVybiA9IGAoICg/IVxcXFwtKSk/JHtwYXR0ZXJufWA7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5hbGxvd19zcGFjZV9hZnRlcl9zeW1ib2wpIHtcbiAgICBwYXR0ZXJuID0gYCA/JHtwYXR0ZXJufWA7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5hbGxvd19zcGFjZV9hZnRlcl9kaWdpdHMpIHtcbiAgICBwYXR0ZXJuICs9ICcoICg/ISQpKT8nO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuc3ltYm9sX2FmdGVyX2RpZ2l0cykge1xuICAgIHBhdHRlcm4gKz0gc3ltYm9sO1xuICB9IGVsc2Uge1xuICAgIHBhdHRlcm4gPSBzeW1ib2wgKyBwYXR0ZXJuO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuYWxsb3dfbmVnYXRpdmVzKSB7XG4gICAgaWYgKG9wdGlvbnMucGFyZW5zX2Zvcl9uZWdhdGl2ZXMpIHtcbiAgICAgIHBhdHRlcm4gPSBgKFxcXFwoJHtwYXR0ZXJufVxcXFwpfCR7cGF0dGVybn0pYDtcbiAgICB9IGVsc2UgaWYgKCEob3B0aW9ucy5uZWdhdGl2ZV9zaWduX2JlZm9yZV9kaWdpdHMgfHwgb3B0aW9ucy5uZWdhdGl2ZV9zaWduX2FmdGVyX2RpZ2l0cykpIHtcbiAgICAgIHBhdHRlcm4gPSBuZWdhdGl2ZSArIHBhdHRlcm47XG4gICAgfVxuICB9XG5cbiAgLy8gZW5zdXJlIHRoZXJlJ3MgYSBkb2xsYXIgYW5kL29yIGRlY2ltYWwgYW1vdW50LCBhbmQgdGhhdFxuICAvLyBpdCBkb2Vzbid0IHN0YXJ0IHdpdGggYSBzcGFjZSBvciBhIG5lZ2F0aXZlIHNpZ24gZm9sbG93ZWQgYnkgYSBzcGFjZVxuICByZXR1cm4gbmV3IFJlZ0V4cChgXig/IS0/ICkoPz0uKlxcXFxkKSR7cGF0dGVybn0kYCk7XG59XG5cbi8qKlxuICogSXNDdXJyZW5jeSBPcHRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElzQ3VycmVuY3lPcHRpb25zIHtcbiAgc3ltYm9sPzogc3RyaW5nXG4gIHJlcXVpcmVfc3ltYm9sPzogYm9vbGVhblxuICBhbGxvd19zcGFjZV9hZnRlcl9zeW1ib2w/OiBib29sZWFuXG4gIHN5bWJvbF9hZnRlcl9kaWdpdHM/OiBib29sZWFuXG4gIGFsbG93X25lZ2F0aXZlcz86IGJvb2xlYW5cbiAgcGFyZW5zX2Zvcl9uZWdhdGl2ZXM/OiBib29sZWFuXG4gIG5lZ2F0aXZlX3NpZ25fYmVmb3JlX2RpZ2l0cz86IGJvb2xlYW5cbiAgbmVnYXRpdmVfc2lnbl9hZnRlcl9kaWdpdHM/OiBib29sZWFuXG4gIGFsbG93X25lZ2F0aXZlX3NpZ25fcGxhY2Vob2xkZXI/OiBib29sZWFuXG4gIHRob3VzYW5kc19zZXBhcmF0b3I/OiBzdHJpbmdcbiAgZGVjaW1hbF9zZXBhcmF0b3I/OiBzdHJpbmdcbiAgYWxsb3dfZGVjaW1hbDogYm9vbGVhblxuICByZXF1aXJlX2RlY2ltYWw6IGJvb2xlYW5cbiAgZGlnaXRzX2FmdGVyX2RlY2ltYWw6IG51bWJlcltdXG4gIGFsbG93X3NwYWNlX2FmdGVyX2RpZ2l0cz86IGJvb2xlYW5cbn1cblxuXG4vKipcbiAqIFRoZSBjdXJyZW5jeSBkZWZhdWx0IG9wdGlvbnNcbiAqL1xuY29uc3QgZGVmYXVsdF9jdXJyZW5jeV9vcHRpb25zOklzQ3VycmVuY3lPcHRpb25zID0ge1xuICBzeW1ib2w6ICckJyxcbiAgcmVxdWlyZV9zeW1ib2w6IGZhbHNlLFxuICBhbGxvd19zcGFjZV9hZnRlcl9zeW1ib2w6IGZhbHNlLFxuICBzeW1ib2xfYWZ0ZXJfZGlnaXRzOiBmYWxzZSxcbiAgYWxsb3dfbmVnYXRpdmVzOiB0cnVlLFxuICBwYXJlbnNfZm9yX25lZ2F0aXZlczogZmFsc2UsXG4gIG5lZ2F0aXZlX3NpZ25fYmVmb3JlX2RpZ2l0czogZmFsc2UsXG4gIG5lZ2F0aXZlX3NpZ25fYWZ0ZXJfZGlnaXRzOiBmYWxzZSxcbiAgYWxsb3dfbmVnYXRpdmVfc2lnbl9wbGFjZWhvbGRlcjogZmFsc2UsXG4gIHRob3VzYW5kc19zZXBhcmF0b3I6ICcsJyxcbiAgZGVjaW1hbF9zZXBhcmF0b3I6ICcuJyxcbiAgYWxsb3dfZGVjaW1hbDogdHJ1ZSxcbiAgcmVxdWlyZV9kZWNpbWFsOiBmYWxzZSxcbiAgZGlnaXRzX2FmdGVyX2RlY2ltYWw6IFsyXSxcbiAgYWxsb3dfc3BhY2VfYWZ0ZXJfZGlnaXRzOiBmYWxzZSxcbn07XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIGB0YXJnZXRgIHN0cmluZyBpcyBhIGN1cnJlbmN5XG4gKiBcbiAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBzdHJpbmdcbiAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXG4gKiBAcmV0dXJuIHRydWUgaWYgdGhlIGB0YXJnZXRgIGlzIGEgY3VycmVuY3ksIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDdXJyZW5jeShzdHI6IHN0cmluZywgb3B0aW9ucykge1xuICBhc3NlcnRTdHJpbmcoc3RyKTtcbiAgb3B0aW9ucyA9IG1lcmdlKG9wdGlvbnMsIGRlZmF1bHRfY3VycmVuY3lfb3B0aW9ucyk7XG4gIHJldHVybiBjdXJyZW5jeVJlZ2V4KG9wdGlvbnMpLnRlc3Qoc3RyKTtcbn1cbiJdfQ==